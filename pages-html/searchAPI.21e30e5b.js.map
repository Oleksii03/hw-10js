{"mappings":"AAGO,SAASA,EAAeC,EAAOC,GAGpC,OAAOC,MAFK,qEAAgCF,2BAA+BC,sCAGxEE,MAAKC,IAEJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAG3B,OAAOH,EAASI,MAAM,G,CCbrB,SAASC,EAAcC,GAC5B,OAAOA,EAAIC,KAAI,CAACC,EAAIC,IACX,0GAGuCD,EAAGE,sBAAsBD,qCAGtEE,KAAK,G,CCLV,MAAMC,EAASC,SAASC,cAAc,YAChCC,EAASF,SAASC,cAAc,YAChCE,EAAcH,SAASC,cAAc,iBACrCG,EAAWJ,SAASC,cAAc,cAClCI,EAAcL,SAASC,cAAc,iBAG3C,IAAIK,EAAa,GACbC,EAAO,EA8DX,SAASC,EAAiBC,GACxBC,QAAQC,IAAIC,SACRA,QAAU,MACZP,EAAYQ,UAAUC,IAAI,cAC1Bd,SAASe,oBAAoB,SAAUP,G,CAhE3CT,EAAOiB,iBAAiB,UAExB,SAA2BP,GAUzB,GATAA,EAAEQ,iBACFV,EAAO,EAEPJ,EAAYU,UAAUC,IAAI,aAE1BR,EAAaG,EAAES,OAAOC,SAASC,OAAOC,MAEtCZ,EAAES,OAAOI,QAEU,KAAfhB,EAAmB,OAEvBF,EAASS,UAAUU,OAAO,aAE1BzC,EAAcwB,EAAYC,GACvBrB,MAAKsC,IACJtB,EAAOuB,UAAYjC,EAAagC,EAAKE,MAEjCF,EAAKG,UAAY,IACnBxB,EAAYU,UAAUU,OAAO,YAAY,IAG5CK,OAAMC,IACL3B,EAAOuB,UAAY,qBACnBf,QAAQoB,MAAMD,EAAI,IAEnBE,SAAQ,KACP3B,EAASS,UAAUC,IAAI,YAAY,G,IAIzCX,EAAYa,iBAAiB,SAE7B,SAAqBP,GACnBL,EAASS,UAAUU,OAAO,aAC1BhB,GAAQ,EACRzB,EAAcwB,EAAYC,GACvBrB,MAAKsC,IACJtB,EAAO8B,mBAAmB,YAAaxC,EAAagC,EAAKE,OAErDF,EAAKE,KAAKO,OAAS,IACrB9B,EAAYU,UAAUC,IAAI,YAAY,IAGzCc,OAAMC,IACL3B,EAAOuB,UAAY,qBACnBf,QAAQoB,MAAMD,EAAI,IAEnBE,SAAQ,KACP3B,EAASS,UAAUC,IAAI,YAAY,G,IAMzCd,SAASgB,iBAAiB,SAAUR,GACpCH,EAAYW,iBAAiB,SAU7B,SAA2BP,GACzBJ,EAAYQ,UAAUU,OAAO,cAC7BvB,SAASgB,iBAAiB,SAAUR,E","sources":["src/js/fetchFn.js","src/js/createMarcup.js","src/js/searchApi.js"],"sourcesContent":["const API_KEY = '33184193-09093e83ff1c2949d43a02918';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getFetchPhoto (query, page) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&page=${page}&per_page=20&orientation=vertical`;\n\n  return fetch(url)\n    .then(response => {\n\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n\n      return response.json();\n    });\n};","export function createMarcup (val) {\n  return val.map((el, i) => {\n    return `\n      <li class='list__item'>\n        <a href=\"#\">\n          <img loading=\"lazy\" height=\"400\" src=\"${el.webformatURL}\" alt=\"${i}\">\n        </a>  \n      </li>`;\n  }).join('');\n}","import { getFetchPhoto } from \"./fetchFn\";\nimport { createMarcup } from \"./createMarcup\";\n\nconst formEl = document.querySelector('.js-form');\nconst listEl = document.querySelector('.js-list');\nconst btnLoadMore = document.querySelector('.js-load-more');\nconst loaderEl = document.querySelector('.js-loader');\nconst btnSearchUp = document.querySelector('.js-search-up');\n// const btnEl = document.querySelector('.js-form__btn');\n\nlet inputValue = '';\nlet page = 1;\n\nformEl.addEventListener('submit', onSearchBySubmit);\n\nfunction onSearchBySubmit (e) {\n  e.preventDefault();\n  page = 1;\n\n  btnLoadMore.classList.add('is-hidden');\n\n  inputValue = e.target.elements.search.value;\n\n  e.target.reset();\n\n  if (inputValue === '') return;\n\n  loaderEl.classList.remove('is-hidden');\n\n  getFetchPhoto(inputValue, page)\n    .then(data => {\n      listEl.innerHTML = createMarcup(data.hits);\n\n      if (data.totalHits > 20) {\n        btnLoadMore.classList.remove('is-hidden');\n      }\n    })\n    .catch(err => {\n      listEl.innerHTML = '<h1>Error 404</h1>';\n      console.error(err);\n    })\n    .finally(() => {\n      loaderEl.classList.add('is-hidden');\n    });\n};\n\nbtnLoadMore.addEventListener('click', onLoadMore);\n\nfunction onLoadMore (e) {\n  loaderEl.classList.remove('is-hidden');\n  page += 1;\n  getFetchPhoto(inputValue, page)\n    .then(data => {\n      listEl.insertAdjacentHTML('beforeend', createMarcup(data.hits));\n\n      if (data.hits.length < 20) {\n        btnLoadMore.classList.add('is-hidden');\n      }\n    })\n    .catch(err => {\n      listEl.innerHTML = '<h1>Error 404</h1>';\n      console.error(err);\n    })\n    .finally(() => {\n      loaderEl.classList.add('is-hidden');\n    });\n};\n\n// -------scroll-event------------------------------------\n\ndocument.addEventListener('scroll', onScrollBtnOpen);\nbtnSearchUp.addEventListener('click', onScrollBtnClose);\n\nfunction onScrollBtnOpen (e) {\n  console.log(scrollY);\n  if (scrollY > 500) {\n    btnSearchUp.classList.add('is-visible');\n    document.removeEventListener('scroll', onScrollBtnOpen);\n  }\n};\n\nfunction onScrollBtnClose (e) {\n  btnSearchUp.classList.remove('is-visible');\n  document.addEventListener('scroll', onScrollBtnOpen);\n}"],"names":["$eaf88d217168ca8e$export$d360be45847cb4b5","query","page","fetch","then","response","ok","Error","status","json","$4d1f23793999d20c$export$2e1fc573fc79e61c","val","map","el","i","webformatURL","join","$103c1df01808e877$var$formEl","document","querySelector","$103c1df01808e877$var$listEl","$103c1df01808e877$var$btnLoadMore","$103c1df01808e877$var$loaderEl","$103c1df01808e877$var$btnSearchUp","$103c1df01808e877$var$inputValue","$103c1df01808e877$var$page","$103c1df01808e877$var$onScrollBtnOpen","e","console","log","scrollY","classList","add","removeEventListener","addEventListener","preventDefault","target","elements","search","value","reset","remove","data","innerHTML","hits","totalHits","catch","err","error","finally","insertAdjacentHTML","length"],"version":3,"file":"searchAPI.21e30e5b.js.map"}